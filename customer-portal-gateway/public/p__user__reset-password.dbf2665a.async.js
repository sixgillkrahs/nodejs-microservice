(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{WW6w:function(j,O,a){"use strict";a.r(O);var f=a("qLMh"),h=a("9og8"),i=a("tJVT"),t=a("q1tI"),e=a.n(t),u=a("7cJT"),g=a("aPsR"),w=a("jxKE"),n=a("0lfv"),V=a("qhof"),N=a.n(V),D=u.K.LockOutlined,k=function(M){var F=M.match,z=M.history,p=F.params.token,J=Object(t.useState)(!0),S=Object(i.a)(J,2),E=S[0],d=S[1],$=Object(t.useState)(!1),I=Object(i.a)($,2),x=I[0],T=I[1],G=Object(t.useState)(!0),C=Object(i.a)(G,2),H=C[0],L=C[1],Q=Object(t.useState)(""),R=Object(i.a)(Q,2),W=R[0],b=R[1],X=Object(t.useState)(10),y=Object(i.a)(X,2),v=y[0],K=y[1],Y=Object(t.useState)(),A=Object(i.a)(Y,2),B=A[0],Z=A[1],U=function(){var c=setInterval(function(){K(function(s){return s-1})},1e3);Z(c)},q=function(){var _=Object(h.a)(Object(f.a)().mark(function c(){var s;return Object(f.a)().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return d(!0),o.next=3,Object(g.j)({token:p,appId:w.d});case 3:s=o.sent,L(s==null?void 0:s.success),s!=null&&s.success||U(),d(!1);case 7:case"end":return o.stop()}},c)}));return function(){return _.apply(this,arguments)}}();Object(t.useEffect)(function(){return d(!0),T(!1),L(!0),K(10),function(){clearInterval(B)}},[]),Object(t.useEffect)(function(){v<=0&&(clearInterval(B),z.push("/user/login"))},[v]),Object(t.useEffect)(function(){q().then()},[p]);var ee=function(){var _=Object(h.a)(Object(f.a)().mark(function c(s){var m,o,P,r;return Object(f.a)().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(m=s.newPassword,o=s.confirmPassword,m===o){l.next=4;break}return b(Object(n.r)("form.message.resetPassword.password.invalid")),l.abrupt("return",!1);case 4:if(!(!E&&m)){l.next=12;break}return d(!0),l.next=8,Object(g.h)({appId:w.d,token:p,newPassword:m});case 8:r=l.sent,T(r==null?void 0:r.success),r!=null&&r.success?U():b(r==null||(P=r.data)===null||P===void 0?void 0:P.message),d(!1);case 12:return l.abrupt("return",!0);case 13:case"end":return l.stop()}},c)}));return function(s){return _.apply(this,arguments)}}();return e.a.createElement("div",{className:N.a.main},e.a.createElement(u.S,{active:E}),e.a.createElement(u.hb,{centered:!0,size:"large"},e.a.createElement(u.fb,{key:"resetPassword",tab:Object(n.r)("form.title.changePassword"),style:{padding:"10px 0"}},H?e.a.createElement(e.a.Fragment,null,x?e.a.createElement("div",{className:"msg"},Object(n.r)("form.message.resetPassword.success","Change password successfully",{second:v})):e.a.createElement(u.W,{submitter:!1,onFinish:ee,onValuesChange:function(){return b("")}},e.a.createElement(u.I.Password,{name:"newPassword",fieldProps:{size:"large",prefix:e.a.createElement(D,{className:"icon"})},placeholder:Object(n.r)("form.field.password"),rules:[{required:!0,message:Object(n.r)("form.message.field.required")}]}),e.a.createElement(u.I.Password,{name:"confirmPassword",fieldProps:{size:"large",prefix:e.a.createElement(D,{className:"icon"})},placeholder:Object(n.r)("form.field.confirmPassword"),rules:[{required:!0,message:Object(n.r)("form.message.field.required")}]}),W?e.a.createElement("div",{className:"error-msg"},W):null,e.a.createElement(u.e,{htmlType:"submit",type:"primary",ghost:!0,className:"pwd-btn",loading:E,size:"large"},Object(n.r)("form.button.submit")))):e.a.createElement("div",{className:"msg invalid"},Object(n.r)("form.message.verifyToken.invalid","Invalid token",{second:v})))))};O.default=k},qhof:function(j,O,a){j.exports={main:"main___dtVfL"}}}]);
